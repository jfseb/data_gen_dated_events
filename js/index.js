"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Helpers = require("./helpers");
const { exit } = require('process');
const argparse_1 = require("argparse");
const { version } = require('../package.json');
const core_1 = require("@js-joda/core");
const seedrandom = require("seedrandom");
const parser = new argparse_1.ArgumentParser({
    description: "date_gen_dated_events, generate HR data"
});
parser.add_argument('-v', '--version', { action: 'version', version });
parser.add_argument('-n', '--nrpersons', { action: 'store', help: 'Number of persons', default: 2 });
parser.add_argument('-z', '--zero', { action: 'store_true', help: 'write zero lines ( one record each month) .Z. ' });
parser.add_argument('-s', '--stopRecords', { action: 'store_true', help: 'write stop records, default extension .S. ' });
parser.add_argument('-o', '--output', { action: 'store', help: 'output prefix, default MONAG_<nrpers>.Z.csv , RANGE_<nrpers>.xx' });
parser.add_argument('-p', '--period', { action: 'store', default: 150, help: 'Event period write zero lines ( one reacord each month) .Z. ' });
parser.add_argument('-u', '--userHierarchy', { action: 'store_true', help: 'generate hierarchy for nrpersons (DIM_USER_<xxxx>.csv) ' });
var args = parser.parse_args();
console.log(args);
console.log(JSON.stringify(args));
var NRPERS = args.nrpersons;
var BASEFILENAME = args.output || '';
if (BASEFILENAME.length && !BASEFILENAME.endsWith('_')) {
    BASEFILENAME += '_';
}
var AVG_NEXT = args.period;
var SUFFIX = Helpers.padZeros(AVG_NEXT, 4) + '_' + Helpers.padZeros(NRPERS, 6);
var NOZERO = !args.zero;
var STOPRECORDs = args.stopRecords;
var ext = "." + (NOZERO ? "" : "Z.") + (STOPRECORDs ? "S." : "") + "csv";
var extc = "." + (NOZERO ? "" : "Z.") + (STOPRECORDs ? "S." : "") + "C.csv";
var FILENAME_MONAG = BASEFILENAME + "MONAG_" + SUFFIX + ext;
var FILENAME_MONAG_C = BASEFILENAME + "MONAG_" + SUFFIX + extc;
var FILENAME_RANGE = BASEFILENAME + "RANGE_" + SUFFIX + ext;
var FILENAME_RANGE_C = BASEFILENAME + "RANGE_" + SUFFIX + extc;
if (args.userHierarchy) {
    Helpers.genUSERHierarchy(NRPERS);
}
var d1 = core_1.LocalDate.of(2020, 1, 6);
var d1Idx = Helpers.dateToDayIndex(d1);
var d2 = core_1.LocalDate.of(2024, 6, 1);
var d2Idx = Helpers.dateToDayIndex(d2);
var deltaTime = d2Idx - d1Idx;
var LOCATION_VALUES = { "NewYork": 5,
    "LA": 5,
    "Chicago": 5,
    "Berlin": 2,
    "Frankfurt": 2,
    "Bangalore": 2,
    "SFO": 1
};
var ESTAT_VALUES = {
    "A": 4,
    "U": 1,
    "P": 1,
    "S": 2,
};
console.log(args);
var pars = {
    AVG_NEXT: 150,
    LOCCHANGE: 0.5,
    FTECHANGE: 0.5,
    ESTATCHANGE: 0.8,
    L_EVENT: 0.7,
    L_HIRE: 0.5,
    LOCATIONs: Helpers.makeMap(LOCATION_VALUES),
    ESTATs: Helpers.makeMap(ESTAT_VALUES),
    firstDate: d1,
    lastDate: d2,
    random: seedrandom('abc'),
    randomOD: { "ESTAT": seedrandom('XZY') },
    REOP_ESTATS: ["A", "U", "P"],
    wsMONAG: undefined,
    wsRANGE: undefined,
    optsMONAG: {
        noZero: NOZERO,
        stopRecords: STOPRECORDs
    }
};
pars.wsMONAG = Helpers.getWS(FILENAME_MONAG);
pars.wsRANGE = Helpers.getWS(FILENAME_RANGE);
Helpers.writeHeader(pars.wsMONAG);
Helpers.writeHeader(pars.wsRANGE);
for (var p = 1; p < NRPERS; ++p) {
    var pn = Helpers.genUser(p);
    Helpers.genPerson(pn, pars);
}
pars.wsMONAG.ws.on('finish', () => {
    console.log('Wrote data to file ' + FILENAME_MONAG);
    Helpers.cleanseWSInFile(FILENAME_MONAG, FILENAME_MONAG_C, function () {
        console.log('Wrote cleansed file to ' + FILENAME_MONAG_C);
    });
});
pars.wsRANGE.ws.on('finish', () => {
    console.log('Wrote data to file ' + FILENAME_RANGE);
    Helpers.cleanseWSInFile(FILENAME_RANGE, FILENAME_RANGE_C, function () {
        console.log('Wrote cleansed file to ' + FILENAME_RANGE_C);
    });
});
pars.wsMONAG.ws.end();
pars.wsRANGE.ws.end();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLHFDQUFxQztBQUVyQyxNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBRXBDLHVDQUEwQztBQUMxQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFFL0Msd0NBQTBDO0FBRTFDLHlDQUF5QztBQUV6QyxNQUFNLE1BQU0sR0FBRyxJQUFJLHlCQUFjLENBQUU7SUFDakMsV0FBVyxFQUFFLHlDQUF5QztDQUN2RCxDQUFDLENBQUM7QUFHSCxNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxXQUFXLEVBQUUsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7QUFDdkUsTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsYUFBYSxFQUFFLEVBQUUsTUFBTSxFQUFHLE9BQU8sRUFBRSxJQUFJLEVBQUUsbUJBQW1CLEVBQUcsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDdkcsTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRyxJQUFJLEVBQUUsZ0RBQWdELEVBQUUsQ0FBQyxDQUFDO0FBQ3ZILE1BQU0sQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLGVBQWUsRUFBRSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLDRDQUE0QyxFQUFFLENBQUMsQ0FBQztBQUN6SCxNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsRUFBRSxNQUFNLEVBQUcsT0FBTyxFQUFFLElBQUksRUFBRSxpRUFBaUUsRUFBRSxDQUFDLENBQUM7QUFDckksTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUcsR0FBRyxFQUFHLElBQUksRUFBRSw4REFBOEQsRUFBRSxDQUFDLENBQUM7QUFDakosTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsaUJBQWlCLEVBQUUsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSx5REFBeUQsRUFBRSxDQUFDLENBQUM7QUFFeEksSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBRS9CLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDbEMsSUFBSSxNQUFNLEdBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQztBQUUzQixJQUFJLFlBQVksR0FBRyxJQUFJLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQztBQUNyQyxJQUFLLFlBQVksQ0FBQyxNQUFNLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0lBQ3ZELFlBQVksSUFBSSxHQUFHLENBQUM7Q0FDckI7QUFFRCxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBRTNCLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBSSxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBQyxDQUFDLENBQUMsQ0FBQTtBQUU3RSxJQUFJLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDeEIsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztBQUVuQyxJQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUUsSUFBSSxDQUFDLEdBQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDO0FBQzdFLElBQUksSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBRSxJQUFJLENBQUMsR0FBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUM7QUFFaEYsSUFBSSxjQUFjLEdBQUcsWUFBWSxHQUFHLFFBQVEsR0FBSSxNQUFNLEdBQUksR0FBRyxDQUFDO0FBQzlELElBQUksZ0JBQWdCLEdBQUcsWUFBWSxHQUFHLFFBQVEsR0FBSSxNQUFNLEdBQUksSUFBSSxDQUFDO0FBQ2pFLElBQUksY0FBYyxHQUFHLFlBQVksR0FBRyxRQUFRLEdBQUksTUFBTSxHQUFJLEdBQUcsQ0FBQztBQUM5RCxJQUFJLGdCQUFnQixHQUFHLFlBQVksR0FBRyxRQUFRLEdBQUksTUFBTSxHQUFJLElBQUksQ0FBQztBQUlqRSxJQUFLLElBQUksQ0FBQyxhQUFhLEVBQUc7SUFDeEIsT0FBTyxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0NBQ2xDO0FBRUQsSUFBSSxFQUFFLEdBQUcsZ0JBQVMsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztBQUNoQyxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksRUFBRSxHQUFHLGdCQUFTLENBQUMsRUFBRSxDQUFDLElBQUksRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEMsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUN2QyxJQUFJLFNBQVMsR0FBRyxLQUFLLEdBQUMsS0FBSyxDQUFDO0FBRTVCLElBQUksZUFBZSxHQUFHLEVBQUUsU0FBUyxFQUFHLENBQUM7SUFDbkMsSUFBSSxFQUFHLENBQUM7SUFDUixTQUFTLEVBQUcsQ0FBQztJQUNiLFFBQVEsRUFBRyxDQUFDO0lBQ1osV0FBVyxFQUFHLENBQUM7SUFDZixXQUFXLEVBQUksQ0FBQztJQUNoQixLQUFLLEVBQUcsQ0FBQztDQUNWLENBQUM7QUFFRixJQUFJLFlBQVksR0FBRztJQUNqQixHQUFHLEVBQUcsQ0FBQztJQUNQLEdBQUcsRUFBRyxDQUFDO0lBQ1AsR0FBRyxFQUFHLENBQUM7SUFDUCxHQUFHLEVBQUcsQ0FBQztDQUNSLENBQUM7QUFDRixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBR2xCLElBQUksSUFBSSxHQUFHO0lBQ1YsUUFBUSxFQUFHLEdBQUc7SUFDZCxTQUFTLEVBQUcsR0FBRztJQUNmLFNBQVMsRUFBRyxHQUFHO0lBQ2YsV0FBVyxFQUFHLEdBQUc7SUFDakIsT0FBTyxFQUFHLEdBQUc7SUFDYixNQUFNLEVBQUcsR0FBRztJQUNaLFNBQVMsRUFBRyxPQUFPLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQztJQUM1QyxNQUFNLEVBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUM7SUFDdEMsU0FBUyxFQUFHLEVBQUU7SUFDZCxRQUFRLEVBQUksRUFBRTtJQUNkLE1BQU0sRUFBRyxVQUFVLENBQUMsS0FBSyxDQUFDO0lBQzFCLFFBQVEsRUFBRyxFQUFFLE9BQU8sRUFBRyxVQUFVLENBQUMsS0FBSyxDQUFDLEVBQUU7SUFDMUMsV0FBVyxFQUFJLENBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDNUIsT0FBTyxFQUFHLFNBQVM7SUFDbkIsT0FBTyxFQUFHLFNBQVM7SUFDbkIsU0FBUyxFQUFHO1FBQ1gsTUFBTSxFQUFHLE1BQU07UUFDZixXQUFXLEVBQUcsV0FBVztLQUMxQjtDQUNxQixDQUFDO0FBR3ZCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUM3QyxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDN0MsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDbEMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDbEMsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTtJQUM5QixJQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzVCLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0NBQzdCO0FBRUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUU7SUFDaEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsR0FBRyxjQUFjLENBQUUsQ0FBQztJQUNyRCxPQUFPLENBQUMsZUFBZSxDQUFDLGNBQWMsRUFBRSxnQkFBZ0IsRUFBRTtRQUN4RCxPQUFPLENBQUMsR0FBRyxDQUFDLHlCQUF5QixHQUFHLGdCQUFnQixDQUFFLENBQUM7SUFDN0QsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQztBQUNILElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFO0lBQ2hDLE9BQU8sQ0FBQyxHQUFHLENBQUMscUJBQXFCLEdBQUcsY0FBYyxDQUFFLENBQUM7SUFDckQsT0FBTyxDQUFDLGVBQWUsQ0FBQyxjQUFjLEVBQUUsZ0JBQWdCLEVBQUU7UUFDeEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsR0FBRyxnQkFBZ0IsQ0FBRSxDQUFDO0lBQzdELENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUN0QixJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcclxuaW1wb3J0ICogYXMgSGVscGVycyBmcm9tICcuL2hlbHBlcnMnO1xyXG5cclxuY29uc3QgeyBleGl0IH0gPSByZXF1aXJlKCdwcm9jZXNzJyk7XHJcblxyXG5pbXBvcnQgeyBBcmd1bWVudFBhcnNlciB9IGZyb20gJ2FyZ3BhcnNlJztcclxuY29uc3QgeyB2ZXJzaW9uIH0gPSByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKTtcclxuXHJcbmltcG9ydCB7TG9jYWxEYXRlIH0gZnJvbSAgXCJAanMtam9kYS9jb3JlXCI7XHJcblxyXG5pbXBvcnQgKiBhcyBzZWVkcmFuZG9tIGZyb20gJ3NlZWRyYW5kb20nO1xyXG5cclxuY29uc3QgcGFyc2VyID0gbmV3IEFyZ3VtZW50UGFyc2VyKCB7XHJcbiAgZGVzY3JpcHRpb246IFwiZGF0ZV9nZW5fZGF0ZWRfZXZlbnRzLCBnZW5lcmF0ZSBIUiBkYXRhXCJcclxufSk7XHJcblxyXG5cclxucGFyc2VyLmFkZF9hcmd1bWVudCgnLXYnLCAnLS12ZXJzaW9uJywgeyBhY3Rpb246ICd2ZXJzaW9uJywgdmVyc2lvbiB9KTtcclxucGFyc2VyLmFkZF9hcmd1bWVudCgnLW4nLCAnLS1ucnBlcnNvbnMnLCB7IGFjdGlvbiA6ICdzdG9yZScsIGhlbHA6ICdOdW1iZXIgb2YgcGVyc29ucycgLCBkZWZhdWx0OiAyIH0pO1xyXG5wYXJzZXIuYWRkX2FyZ3VtZW50KCcteicsICctLXplcm8nLCB7IGFjdGlvbjogJ3N0b3JlX3RydWUnLCAgaGVscDogJ3dyaXRlIHplcm8gbGluZXMgKCBvbmUgcmVjb3JkIGVhY2ggbW9udGgpIC5aLiAnIH0pO1xyXG5wYXJzZXIuYWRkX2FyZ3VtZW50KCctcycsICctLXN0b3BSZWNvcmRzJywgeyBhY3Rpb246ICdzdG9yZV90cnVlJywgaGVscDogJ3dyaXRlIHN0b3AgcmVjb3JkcywgZGVmYXVsdCBleHRlbnNpb24gLlMuICcgfSk7XHJcbnBhcnNlci5hZGRfYXJndW1lbnQoJy1vJywgJy0tb3V0cHV0JywgeyBhY3Rpb24gOiAnc3RvcmUnLCBoZWxwOiAnb3V0cHV0IHByZWZpeCwgZGVmYXVsdCBNT05BR188bnJwZXJzPi5aLmNzdiAsIFJBTkdFXzxucnBlcnM+Lnh4JyB9KTtcclxucGFyc2VyLmFkZF9hcmd1bWVudCgnLXAnLCAnLS1wZXJpb2QnLCB7IGFjdGlvbjogJ3N0b3JlJywgZGVmYXVsdCA6IDE1MCwgIGhlbHA6ICdFdmVudCBwZXJpb2Qgd3JpdGUgemVybyBsaW5lcyAoIG9uZSByZWFjb3JkIGVhY2ggbW9udGgpIC5aLiAnIH0pO1xyXG5wYXJzZXIuYWRkX2FyZ3VtZW50KCctdScsICctLXVzZXJIaWVyYXJjaHknLCB7IGFjdGlvbjogJ3N0b3JlX3RydWUnLCBoZWxwOiAnZ2VuZXJhdGUgaGllcmFyY2h5IGZvciBucnBlcnNvbnMgKERJTV9VU0VSXzx4eHh4Pi5jc3YpICcgfSk7XHJcblxyXG52YXIgYXJncyA9IHBhcnNlci5wYXJzZV9hcmdzKCk7XHJcblxyXG5jb25zb2xlLmxvZyhhcmdzKTtcclxuY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoYXJncykpO1xyXG52YXIgTlJQRVJTPSBhcmdzLm5ycGVyc29ucztcclxuXHJcbnZhciBCQVNFRklMRU5BTUUgPSBhcmdzLm91dHB1dCB8fCAnJztcclxuaWYgKCBCQVNFRklMRU5BTUUubGVuZ3RoICYmICFCQVNFRklMRU5BTUUuZW5kc1dpdGgoJ18nKSkge1xyXG4gIEJBU0VGSUxFTkFNRSArPSAnXyc7XHJcbn1cclxuXHJcbnZhciBBVkdfTkVYVCA9IGFyZ3MucGVyaW9kO1xyXG5cclxudmFyIFNVRkZJWCA9IEhlbHBlcnMucGFkWmVyb3MoQVZHX05FWFQsNCkgKyAnXycgICsgSGVscGVycy5wYWRaZXJvcyhOUlBFUlMsNilcclxuXHJcbnZhciBOT1pFUk8gPSAhYXJncy56ZXJvO1xyXG52YXIgU1RPUFJFQ09SRHMgPSBhcmdzLnN0b3BSZWNvcmRzO1xyXG5cclxudmFyIGV4dCA9IFwiLlwiICsgKE5PWkVSTyA/IFwiXCIgOiAgXCJaLlwiKSAgKyAgIChTVE9QUkVDT1JEcyA/IFwiUy5cIiA6IFwiXCIpICsgXCJjc3ZcIjtcclxudmFyIGV4dGMgPSBcIi5cIiArIChOT1pFUk8gPyBcIlwiIDogIFwiWi5cIikgICsgICAoU1RPUFJFQ09SRHMgPyBcIlMuXCIgOiBcIlwiKSArIFwiQy5jc3ZcIjtcclxuXHJcbnZhciBGSUxFTkFNRV9NT05BRyA9IEJBU0VGSUxFTkFNRSArIFwiTU9OQUdfXCIgKyAgU1VGRklYICsgIGV4dDtcclxudmFyIEZJTEVOQU1FX01PTkFHX0MgPSBCQVNFRklMRU5BTUUgKyBcIk1PTkFHX1wiICsgIFNVRkZJWCArICBleHRjO1xyXG52YXIgRklMRU5BTUVfUkFOR0UgPSBCQVNFRklMRU5BTUUgKyBcIlJBTkdFX1wiICsgIFNVRkZJWCArICBleHQ7XHJcbnZhciBGSUxFTkFNRV9SQU5HRV9DID0gQkFTRUZJTEVOQU1FICsgXCJSQU5HRV9cIiArICBTVUZGSVggKyAgZXh0YztcclxuXHJcblxyXG5cclxuaWYgKCBhcmdzLnVzZXJIaWVyYXJjaHkgKSB7XHJcbiAgSGVscGVycy5nZW5VU0VSSGllcmFyY2h5KE5SUEVSUyk7XHJcbn1cclxuXHJcbnZhciBkMSA9IExvY2FsRGF0ZS5vZigyMDIwLDEsNik7XHJcbnZhciBkMUlkeCA9IEhlbHBlcnMuZGF0ZVRvRGF5SW5kZXgoZDEpO1xyXG52YXIgZDIgPSBMb2NhbERhdGUub2YoMjAyNCw2LDEpO1xyXG52YXIgZDJJZHggPSBIZWxwZXJzLmRhdGVUb0RheUluZGV4KGQyKTtcclxudmFyIGRlbHRhVGltZSA9IGQySWR4LWQxSWR4O1xyXG5cclxudmFyIExPQ0FUSU9OX1ZBTFVFUyA9IHsgXCJOZXdZb3JrXCIgOiA1LFxyXG4gIFwiTEFcIiA6IDUsXHJcbiAgXCJDaGljYWdvXCIgOiA1LFxyXG4gIFwiQmVybGluXCIgOiAyLFxyXG4gIFwiRnJhbmtmdXJ0XCIgOiAyLFxyXG4gIFwiQmFuZ2Fsb3JlXCIgOiAgMixcclxuICBcIlNGT1wiIDogMVxyXG59O1xyXG5cclxudmFyIEVTVEFUX1ZBTFVFUyA9IHtcclxuICBcIkFcIiA6IDQsXHJcbiAgXCJVXCIgOiAxLFxyXG4gIFwiUFwiIDogMSxcclxuICBcIlNcIiA6IDIsXHJcbn07XHJcbmNvbnNvbGUubG9nKGFyZ3MpO1xyXG5cclxuXHJcbnZhciBwYXJzID0ge1xyXG4gQVZHX05FWFQgOiAxNTAsXHJcbiBMT0NDSEFOR0UgOiAwLjUsXHJcbiBGVEVDSEFOR0UgOiAwLjUsXHJcbiBFU1RBVENIQU5HRSA6IDAuOCxcclxuIExfRVZFTlQgOiAwLjcsXHJcbiBMX0hJUkUgOiAwLjUsXHJcbiBMT0NBVElPTnMgOiBIZWxwZXJzLm1ha2VNYXAoTE9DQVRJT05fVkFMVUVTKSxcclxuIEVTVEFUcyA6IEhlbHBlcnMubWFrZU1hcChFU1RBVF9WQUxVRVMpLFxyXG4gZmlyc3REYXRlIDogZDEsXHJcbiBsYXN0RGF0ZSAgOiBkMixcclxuIHJhbmRvbSA6IHNlZWRyYW5kb20oJ2FiYycpLFxyXG4gcmFuZG9tT0QgOiB7IFwiRVNUQVRcIiA6IHNlZWRyYW5kb20oJ1haWScpIH0sXHJcbiBSRU9QX0VTVEFUUyA6ICBbXCJBXCIsXCJVXCIsXCJQXCJdLFxyXG4gd3NNT05BRyA6IHVuZGVmaW5lZCxcclxuIHdzUkFOR0UgOiB1bmRlZmluZWQsXHJcbiBvcHRzTU9OQUcgOiB7XHJcbiAgbm9aZXJvIDogTk9aRVJPLFxyXG4gIHN0b3BSZWNvcmRzIDogU1RPUFJFQ09SRHNcclxufVxyXG59IGFzIEhlbHBlcnMuR2VuUGFyYW1zO1xyXG5cclxuXHJcbnBhcnMud3NNT05BRyA9IEhlbHBlcnMuZ2V0V1MoRklMRU5BTUVfTU9OQUcpO1xyXG5wYXJzLndzUkFOR0UgPSBIZWxwZXJzLmdldFdTKEZJTEVOQU1FX1JBTkdFKTtcclxuSGVscGVycy53cml0ZUhlYWRlcihwYXJzLndzTU9OQUcpO1xyXG5IZWxwZXJzLndyaXRlSGVhZGVyKHBhcnMud3NSQU5HRSk7XHJcbmZvcih2YXIgcCA9IDE7IHAgPCBOUlBFUlM7ICsrcCkge1xyXG4gIHZhciBwbiA9IEhlbHBlcnMuZ2VuVXNlcihwKTtcclxuICBIZWxwZXJzLmdlblBlcnNvbihwbiwgcGFycyk7XHJcbn1cclxuXHJcbnBhcnMud3NNT05BRy53cy5vbignZmluaXNoJywgKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKCdXcm90ZSBkYXRhIHRvIGZpbGUgJyArIEZJTEVOQU1FX01PTkFHICk7XHJcbiAgSGVscGVycy5jbGVhbnNlV1NJbkZpbGUoRklMRU5BTUVfTU9OQUcsIEZJTEVOQU1FX01PTkFHX0MsIGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc29sZS5sb2coJ1dyb3RlIGNsZWFuc2VkIGZpbGUgdG8gJyArIEZJTEVOQU1FX01PTkFHX0MgKTtcclxuICB9KTtcclxufSk7XHJcbnBhcnMud3NSQU5HRS53cy5vbignZmluaXNoJywgKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKCdXcm90ZSBkYXRhIHRvIGZpbGUgJyArIEZJTEVOQU1FX1JBTkdFICk7XHJcbiAgSGVscGVycy5jbGVhbnNlV1NJbkZpbGUoRklMRU5BTUVfUkFOR0UsIEZJTEVOQU1FX1JBTkdFX0MsIGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc29sZS5sb2coJ1dyb3RlIGNsZWFuc2VkIGZpbGUgdG8gJyArIEZJTEVOQU1FX1JBTkdFX0MgKTtcclxuICB9KTtcclxufSk7XHJcblxyXG5wYXJzLndzTU9OQUcud3MuZW5kKCk7XHJcbnBhcnMud3NSQU5HRS53cy5lbmQoKTtcclxuXHJcbiJdfQ==
